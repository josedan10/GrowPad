(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{295:function(e,t,a){e.exports=a(568)},517:function(e,t){},530:function(e,t){},532:function(e,t){},568:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(288),c=a.n(s),i=a(16),o=a(32),u=a(290),l=a(83),p=a(20),h=a(5),m=a(6),b=a(8),d=a(7),f=a(9),g=a(572),O=a(575),j=a(185),v=a(43),E=a(17),y=a(573),k=a(574),w=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(d.a)(t).call(this,e))).logout=a.logout.bind(Object(E.a)(Object(E.a)(a))),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"logout",value:function(e){e.preventDefault(),this.props.firebase.logout(),this.props.history.push("/login")}},{key:"render",value:function(){return this.props.auth.isLoaded?this.props.auth.isEmpty?r.a.createElement("nav",null,r.a.createElement(y.a,{to:"/"},"Home"),r.a.createElement(y.a,{to:"/Somewhere"},"404"),r.a.createElement(y.a,{to:"/login"},"Login")):r.a.createElement("nav",null,r.a.createElement(y.a,{to:"/"},"Home"),r.a.createElement(y.a,{to:"/Somewhere"},"404"),r.a.createElement(y.a,{to:"/scraper"},"Scraper"),r.a.createElement(y.a,{to:"/#",onClick:this.logout},"Logout")):null}}]),t}(r.a.Component),x=Object(i.d)(k.a,Object(o.b)(function(e){return{auth:e.firebase.auth}},{}),Object(p.firebaseConnect)())(w),C=a(571),S=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.component;return this.props.auth.isLoaded?this.props.auth.isEmpty?r.a.createElement(C.a,{to:{pathname:"/login",state:{from:this.props.location}}}):r.a.createElement(e,this.props):"Loading ..."}}]),t}(r.a.Component),P=Object(i.d)(k.a,Object(p.firebaseConnect)(),Object(o.b)(function(e){return{auth:e.firebase.auth}},{}))(S),F=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Page Not Found 404.")}}]),t}(n.Component),D=a(27),M=a(188),L=a(25),A=a.n(L),W=a(42),N=a(125),I=a.n(N),R=a(186),U=a.n(R),z=a(292),H=a.n(z),T={sites:[{baseUrl:"https://www.paginasamarillas.com.ar",params:{pagination:"p-",noPaginateIndex:!0,searchDir:"buscar/q",keyWords:["restaurantes","zapaterias","pizzerias","pastelerias"]},maxPages:1}],timeOut:0},_=a(65),J=a.n(_),q=/instagram.com/g,B=/facebook.com/g,G=/blogger.com|wix.com|wordpress.com/g,K=function(){var e=Object(W.a)(A.a.mark(function e(t){var a,n;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=J.a.load(t),n=a(".businesses > li"),e.next=5,Promise.all(n.map(Object(W.a)(A.a.mark(function e(){var t,n,r,s,c,i,o,u,l,p,h;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get(encodeURI(a(this).data("href")));case 2:return t=e.sent,n=J()('h1[itemprop="name"]',t.data).text(),"Argentina",r=J()("#mailAnunciante",t.data).attr("value"),s=J()("#Web",t.data).text().trim(),c=J()(".aboutinfo > p",t.data).text(),i="",p=[],B.test(s)?(u=s,p.push("SEO"),p.push("web design"),i+="\nDon't have website"):q.test(s)?(l=s,p.push("SEO"),p.push("web design"),i+="\nDon't have website"):G.test(s)||""===s?(p.push("SEO"),p.push("web design"),i+="\nDon't have own domain name",o=s):o=s,h={name:n,location:"Argentina",email:r,website:o,facebook:u,instagram:l,weakness:p,description:c,observations:i,pageWereWasFound:"paginasamarillas.com.ar"},e.abrupt("return",h);case 13:case"end":return e.stop()}},e,this)}))).get());case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(0),console.log("Error fetching some subpage"),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(W.a)(A.a.mark(function e(t){var a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t.baseUrl,e.next="https://www.paginasamarillas.com.ar"===e.t0?4:6;break;case 4:return a=K(t.html),e.abrupt("return",a);case 6:return console.log("Formato desconocido"),e.abrupt("break",8);case 8:e.next=14;break;case 10:e.prev=10,e.t1=e.catch(0),console.log("Error formatting the data"),console.log(e.t1);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),Z=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(d.a)(t).call(this,e))).props=e,a.state={config:T,status:"sleeping",percentage:0,page:0,maxPages:0,companiesFound:null},a.baseUrl="./src/scraper/results/",a.setMessage=a.setMessage.bind(Object(E.a)(Object(E.a)(a))),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"setMessage",value:function(e){this.props.setMessage(e)}},{key:"scrapPage",value:function(e,t,a,n){var r=this.setMessage,s=this.state;return new Promise(function(c,i){setTimeout(Object(W.a)(A.a.mark(function s(){var o,u,l;return A.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return o="".concat(e,"/").concat(t.searchDir,"/").concat(a,"/").concat(t.noPaginateIndex&&1===n?"":t.pagination+n+"/"),s.prev=1,r("Scraping page ".concat(o)),s.next=5,I.a.get(o);case 5:return u=s.sent,s.next=8,Y({baseUrl:e,html:u.data});case 8:l=s.sent,c(l),s.next=17;break;case 12:s.prev=12,s.t0=s.catch(1),r("Error fetching ".concat(o,": ").concat(s.t0)),console.log("Error fetching ".concat(o,": ").concat(s.t0)),i(s.t0);case 17:case"end":return s.stop()}},s,this,[[1,12]])})),s.config.timeOut)})}},{key:"setMaxPages",value:function(e){this.setState(function(t){return Object(D.a)({},t,{maxPages:e})})}},{key:"scrapFunction",value:function(){var e=Object(W.a)(A.a.mark(function e(){var t,a,n,r,s,c,i,o,u,l,p,h;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=this.state.config.sites,n=U()(),r=0,T.sites.forEach(function(e){r+=e.maxPages*e.params.keyWords.length}),this.setMaxPages(r),c=0,l=0;case 8:if(!(l<a.length)){e.next=35;break}s=a[l],p=0;case 11:if(!(p<s.params.keyWords.length)){e.next=32;break}i=1,u=s.params.keyWords[p];case 14:return e.prev=14,e.next=17,this.scrapPage(s.baseUrl,s.params,u,i);case 17:o=e.sent,t=[].concat(Object(M.a)(t),Object(M.a)(o)),i++,c++,this.updateProgress(c),e.next=28;break;case 24:return e.prev=24,e.t0=e.catch(14),this.setMessage("Error scraping page."),e.abrupt("return");case 28:if(i<=s.maxPages){e.next=14;break}case 29:p++,e.next=11;break;case 32:l++,e.next=8;break;case 35:h=U()().from(n,!0),console.log(t),this.setState(function(e){return Object(D.a)({},e,{status:"sleeping",timeLapsed:h,companiesFound:t})}),this.setMessage("Fetched data in ".concat(h));case 39:case"end":return e.stop()}},e,this,[[14,24]])}));return function(){return e.apply(this,arguments)}}()},{key:"initScraping",value:function(){this.setState(function(e){return Object(D.a)({},e,{status:"scraping"})},this.scrapFunction)}},{key:"updateProgress",value:function(e){this.setState(function(t){return Object(D.a)({},t,{percentage:(100*e/t.maxPages).toFixed(2),page:e})})}},{key:"saveData",value:function(){"sleeping"!==this.state.status?this.setMessage("Wait until the scraper finish to to the actual process."):this.setState(function(e){return Object(D.a)({},e,{status:"saving"})},function(){})}},{key:"render",value:function(){var e=this,t=this.state,a=t.percentage,n=t.status,s=t.companiesFound,c=t.page,i=t.maxPages,o=t.config;return r.a.createElement("div",null,r.a.createElement("div",null,a,"%"),r.a.createElement("div",null,"Reviewed ",c,"/",i*o.sites.length," pages"),r.a.createElement("dir",null,"Status: ",n),s&&s.length>0&&r.a.createElement("pre",null,r.a.createElement("code",null,H()(JSON.stringify(s),{indent_size:2,space_in_empty_paren:!0}))),r.a.createElement("button",{disabled:"sleeping"!==n,onClick:function(t){return e.initScraping()}},"Init Scraping"),r.a.createElement("button",{disabled:!0,onClick:function(t){return e.saveData()}},"Save Data"))}}]),t}(r.a.Component),Q=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(d.a)(t).call(this,e))).state={msg:""},a.child=r.a.createRef(),a.setMessage=a.setMessage.bind(Object(E.a)(Object(E.a)(a))),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"setMessage",value:function(e){this.setState(function(t){return Object(D.a)({},t,{msg:e})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,this.state.msg),r.a.createElement(Z,{setMessage:this.setMessage}))}}]),t}(n.Component),V=a(64),X=a(294),$=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(d.a)(t).call(this,e))).state={email:"",password:""},a.handleSubmit=a.handleSubmit.bind(Object(E.a)(Object(E.a)(a))),a.handleChange=a.handleChange.bind(Object(E.a)(Object(E.a)(a))),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){console.log(this.props)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.firebase.login(this.state).then(function(){return t.props.history.push("/dashboard")}).catch(function(e){console.error("Error in login: "+e)})}},{key:"handleChange",value:function(e){this.setState(Object(D.a)({},this.state,Object(V.a)({},e.target.name,e.target.value)))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",name:"email",placeholder:"user@mail.com",onChange:this.handleChange})),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"password",name:"password",placeholder:"********",onChange:this.handleChange})),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-submit"}))))}}]),t}(n.Component),ee=Object(X.a)(k.a,Object(o.b)(function(e){return{auth:e.firebase.auth}},{}),Object(p.firebaseConnect)())($),te=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(ee,null))}}]),t}(n.Component),ae=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Hello from react router"))}}]),t}(n.Component),ne=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome User. This is the dashboard!"))}}]),t}(n.Component),re=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("li",null,r.a.createElement("input",{type:"checkbox",name:"",id:"",defaultChecked:this.props.item.checked}),r.a.createElement("label",null," ",this.props.item.itemName))}}]),t}(n.Component),se=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",null,r.a.createElement("h4",null,this.props.list.name),r.a.createElement("strong",null,"Created ",new Date(this.props.list.createdAt).toLocaleDateString()," at ",new Date(this.props.list.createdAt).toLocaleTimeString()),r.a.createElement("p",null,this.props.list.description),this.props.list.items.length>0&&this.props.list.items.map(function(e,t){return r.a.createElement(re,{key:t,item:e})}))}}]),t}(n.Component),ce=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",items:[],description:"",createdAt:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(V.a)({},e.target.id,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(this.props),this.props.firestore.add("lists",Object(D.a)({},this.state,{createdAt:Date.now()}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{action:"post",onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"name",type:"text",onChange:this.handleChange.bind(this),placeholder:"What's the new list name?"})),r.a.createElement("div",{className:"input-group"},r.a.createElement("textarea",{id:"description",onChange:this.handleChange.bind(this),placeholder:"Write the list description..."})),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"btn btn-submit",disabled:""===this.state.name,type:"submit",value:"Create"}))))}}]),t}(n.Component),ie=Object(i.d)(Object(p.withFirestore)(ce)),oe=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){document.title="Lists"}},{key:"render",value:function(){var e=this.props.userLists,t=[];if(e)for(var a in e)t.push(r.a.createElement(se,{key:a,list:e[a]}));return r.a.createElement("div",null,t,r.a.createElement(ie,null))}}]),t}(n.Component),ue=Object(i.d)(Object(o.b)(function(e){return{userLists:e.firestore.data.lists}}),Object(p.firestoreConnect)(function(){return["lists"]}))(oe),le=Object(v.a)({basename:"/",forceRefresh:!0}),pe=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{history:le},r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement(O.a,null,r.a.createElement(j.a,{exact:!0,path:"/",component:ae}),r.a.createElement(j.a,{exact:!0,path:"/scraper",component:Q}),r.a.createElement(j.a,{exact:!0,path:"/login",component:te}),r.a.createElement(P,{exact:!0,path:"/dashboard",component:ne}),r.a.createElement(P,{exact:!0,path:"/lists",component:ue}),r.a.createElement(j.a,{component:F}))))}}]),t}(r.a.Component),he=Object(i.c)({firestore:l.firestoreReducer,firebase:p.firebaseReducer}),me=a(86),be=a.n(me);a(560),a(564),a(570),a(566),a(569);be.a.initializeApp({apiKey:"AIzaSyAO8ATEriGYitHNrzwDUyLZ3wfqp0jCHGA",authDomain:"growpad.firebaseapp.com",databaseURL:"https://growpad.firebaseio.com",projectId:"growpad",storageBucket:"growpad.appspot.com",messagingSenderId:"450215982941"}),be.a.firestore(),be.a.firestore().settings({timestampsInSnapshots:!0});var de=be.a,fe=Object(i.e)(he,Object(i.d)(Object(i.a)(u.a.withExtraArgument({getFirestore:l.getFirestore})))),ge={firebase:de,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:fe.dispatch,createFirestoreInstance:l.createFirestoreInstance};c.a.render(r.a.createElement(o.a,{store:fe},r.a.createElement(p.ReactReduxFirebaseProvider,ge,r.a.createElement(pe,null))),document.getElementById("root"))}},[[295,2,1]]]);
//# sourceMappingURL=main.5474b9f8.chunk.js.map